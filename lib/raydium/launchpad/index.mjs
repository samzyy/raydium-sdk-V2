var zn=Object.defineProperty,jn=Object.defineProperties;var Zn=Object.getOwnPropertyDescriptors;var Xt=Object.getOwnPropertySymbols;var Qn=Object.prototype.hasOwnProperty,Yn=Object.prototype.propertyIsEnumerable;var Ht=(t,e,n)=>e in t?zn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W=(t,e)=>{for(var n in e||(e={}))Qn.call(e,n)&&Ht(t,n,e[n]);if(Xt)for(var n of Xt(e))Yn.call(e,n)&&Ht(t,n,e[n]);return t},q=(t,e)=>jn(t,Zn(e));import{SystemProgram as Xe,TransactionInstruction as ae}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Xn}from"@solana/spl-token";import mt from"bn.js";import{PublicKey as ui}from"@solana/web3.js";import Jt,{isBN as $t}from"bn.js";import{bits as No,BitStructure as Lo,blob as Jn,Blob as Ro,cstr as Mo,f32 as vo,f32be as Fo,f64 as Eo,f64be as Oo,greedy as Do,Layout as $n,ns64 as Wo,ns64be as Vo,nu64 as _o,nu64be as qo,offset as ei,s16 as Go,s16be as Uo,s24 as Xo,s24be as Ho,s32 as ti,s32be as zo,s40 as jo,s40be as Zo,s48 as Qo,s48be as Yo,s8 as Jo,seq as ni,struct as $o,Structure as ii,u16 as ri,u16be as es,u24 as ts,u24be as ns,u32 as oi,u32be as is,u40 as rs,u40be as os,u48 as ss,u48be as as,u8 as si,UInt as ai,union as us,Union as cs,unionLayoutDiscriminator as ls,utf8 as ms}from"@solana/buffer-layout";var gt=$n,zt=ii;var yt=ai;var jt=si,xe=ri;var Zt=oi;var me=ti;var Qt=ni;var Z=Jn;var Yt=ei;var Se=class extends gt{constructor(n,i,r){super(n,r);this.blob=Z(n),this.signed=i}decode(n,i=0){let r=new Jt(this.blob.decode(n,i),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(n,i,r=0){return typeof n=="number"&&(n=new Jt(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),i,r)}};function N(t){return new yt(1,t)}function Ke(t){return new yt(4,t)}function p(t){return new Se(8,!1,t)}function O(t){return new Se(16,!1,t)}function en(t){return new Se(8,!0,t)}function tn(t){return new Se(16,!0,t)}var Ce=class extends gt{constructor(n,i,r,o){super(n.span,o);this.layout=n,this.decoder=i,this.encoder=r}decode(n,i){return this.decoder(this.layout.decode(n,i))}encode(n,i,r){return this.layout.encode(this.encoder(n),i,r)}getSpan(n,i){return this.layout.getSpan(n,i)}};function k(t){return new Ce(Z(32),e=>new ui(e),e=>e.toBuffer(),t)}function At(t){return new Ce(jt(),ci,li,t)}function ci(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}function li(t){return t?1:0}function mi(t){let e=Zt("length"),n=S([e,Z(Yt(e,-e.span),"data")]);return new Ce(n,({data:i})=>i,i=>({data:i}),t)}function $(t){return new Ce(mi(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}var Pt=class extends zt{decode(e,n){return super.decode(e,n)}};function S(t,e,n){return new Pt(t,e,n)}function M(t,e,n){let i,r=typeof e=="number"?e:$t(e)?e.toNumber():new Proxy(e,{get(o,s){if(!i){let a=Reflect.get(o,"count");i=$t(a)?a.toNumber():a,Reflect.set(o,"count",i)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(i=a),Reflect.set(o,s,a)}});return Qt(t,r,n)}import{PublicKey as Cs}from"@solana/web3.js";import{get as nn,set as di}from"lodash";var wt=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},rn={},pi={};function H(t){let e=nn(rn,t);if(!e){let n=nn(pi,t);e=new wt({name:t,logLevel:n}),di(rn,t,e)}return e}import{MINT_SIZE as Rs,TOKEN_PROGRAM_ID as Ms,getTransferFeeConfig as vs,unpackMint as Fs}from"@solana/spl-token";var Es=H("Raydium_accountInfo_util");import oe from"bn.js";var Ne=9e15,we=1e9,kt="0123456789abcdef",Ye="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Je="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Tt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ne,maxE:Ne,crypto:!1},cn,de,B=!0,et="[DecimalError] ",Ae=et+"Invalid argument: ",ln=et+"Precision limit exceeded",mn=et+"crypto unavailable",dn="[object Decimal]",X=Math.floor,V=Math.pow,fi=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,bi=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,gi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,pn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,te=1e7,T=7,yi=9007199254740991,Pi=Ye.length-1,ht=Je.length-1,f={toStringTag:dn};f.absoluteValue=f.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),w(t)};f.ceil=function(){return w(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(t,e){var n,i=this,r=i.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(Ae+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new r(i)};f.comparedTo=f.cmp=function(t){var e,n,i,r,o=this,s=o.d,a=(t=new o.constructor(t)).d,c=o.s,u=t.s;if(!s||!a)return!c||!u?NaN:c!==u?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==t.e)return o.e>t.e^c<0?1:-1;for(i=s.length,r=a.length,e=0,n=i<r?i:r;e<n;++e)if(s[e]!==a[e])return s[e]>a[e]^c<0?1:-1;return i===r?0:i>r^c<0?1:-1};f.cosine=f.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+T,i.rounding=1,n=Ai(i,Pn(i,n)),i.precision=t,i.rounding=e,w(de==2||de==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};f.cubeRoot=f.cbrt=function(){var t,e,n,i,r,o,s,a,c,u,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(B=!1,o=l.s*V(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=G(l.d),t=l.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=V(n,1/3),t=X((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new m(n),i.s=l.s):i=new m(o.toString()),s=(t=m.precision)+3;;)if(a=i,c=a.times(a).times(a),u=c.plus(l),i=v(u.plus(l).times(a),u.plus(c),s+2,1),G(a.d).slice(0,s)===(n=G(i.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(w(a,t+1,0),a.times(a).times(a).eq(l))){i=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(w(i,t+1,1),e=!i.times(i).times(i).eq(l));break}return B=!0,w(i,t,m.rounding,e)};f.decimalPlaces=f.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-X(this.e/T))*T,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};f.dividedBy=f.div=function(t){return v(this,new this.constructor(t))};f.dividedToIntegerBy=f.divToInt=function(t){var e=this,n=e.constructor;return w(v(e,new n(t),0,1,1),n.precision,n.rounding)};f.equals=f.eq=function(t){return this.cmp(t)===0};f.floor=function(){return w(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(t){return this.cmp(t)>0};f.greaterThanOrEqualTo=f.gte=function(t){var e=this.cmp(t);return e==1||e===0};f.hyperbolicCosine=f.cosh=function(){var t,e,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(t=Math.ceil(r/3),e=(1/nt(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=Le(s,1,o.times(e),new s(1),!0);for(var c,u=t,l=new s(8);u--;)c=o.times(o),o=a.minus(c.times(l.minus(c.times(l))));return w(o,s.precision=n,s.rounding=i,!0)};f.hyperbolicSine=f.sinh=function(){var t,e,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(r.e,r.sd())+4,o.rounding=1,i=r.d.length,i<3)r=Le(o,2,r,r,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,r=r.times(1/nt(5,t)),r=Le(o,2,r,r,!0);for(var s,a=new o(5),c=new o(16),u=new o(20);t--;)s=r.times(r),r=r.times(a.plus(s.times(c.times(s).plus(u))))}return o.precision=e,o.rounding=n,w(r,e,n,!0)};f.hyperbolicTangent=f.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,v(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};f.inverseCosine=f.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,o=n.rounding;return i!==-1?i===0?e.isNeg()?ee(n,r,o):new n(0):new n(NaN):e.isZero()?ee(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=ee(n,r+4,o).times(.5),n.precision=r,n.rounding=o,t.minus(e))};f.inverseHyperbolicCosine=f.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,B=!1,n=n.times(n).minus(1).sqrt().plus(n),B=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};f.inverseHyperbolicSine=f.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,B=!1,n=n.times(n).plus(1).sqrt().plus(n),B=!0,i.precision=t,i.rounding=e,n.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var t,e,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=o.precision,e=o.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?w(new o(r),t,e,!0):(o.precision=n=i-r.e,r=v(r.plus(1),new o(1).minus(r),n+t,1),o.precision=t+4,o.rounding=1,r=r.ln(),o.precision=t,o.rounding=e,r.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var t,e,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(e=r.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=ee(o,n+4,i).times(.5),t.s=r.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))};f.inverseTangent=f.atan=function(){var t,e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&m+4<=ht)return s=ee(l,m+4,d).times(.25),s.s=u.s,s}else{if(!u.s)return new l(NaN);if(m+4<=ht)return s=ee(l,m+4,d).times(.5),s.s=u.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/T+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(B=!1,e=Math.ceil(a/T),i=1,c=u.times(u),s=new l(u),r=u;t!==-1;)if(r=r.times(c),o=s.minus(r.div(i+=2)),r=r.times(c),s=o.plus(r.div(i+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===o.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),B=!0,w(s,l.precision=m,l.rounding=d,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&X(this.e/T)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(t){return this.cmp(t)<0};f.lessThanOrEqualTo=f.lte=function(t){return this.cmp(t)<1};f.logarithm=f.log=function(t){var e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding,b=5;if(t==null)t=new l(10),e=!0;else{if(t=new l(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(r=n[0];r%10===0;)r/=10;o=r!==1}if(B=!1,a=m+b,s=Pe(u,a),i=e?$e(l,a+10):Pe(t,a),c=v(s,i,a,1),Ee(c.d,r=m,d))do if(a+=10,s=Pe(u,a),i=e?$e(l,a+10):Pe(t,a),c=v(s,i,a,1),!o){+G(c.d).slice(r+1,r+15)+1==1e14&&(c=w(c,m+1,0));break}while(Ee(c.d,r+=10,d));return B=!0,w(c,m,d)};f.minus=f.sub=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,b=this,y=b.constructor;if(t=new y(t),!b.d||!t.d)return!b.s||!t.s?t=new y(NaN):b.d?t.s=-t.s:t=new y(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(u=b.d,d=t.d,a=y.precision,c=y.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else if(u[0])t=new y(b);else return new y(c===3?-0:0);return B?w(t,a,c):t}if(n=X(t.e/T),l=X(b.e/T),u=u.slice(),o=l-n,o){for(m=o<0,m?(e=u,o=-o,s=d.length):(e=d,n=l,s=u.length),i=Math.max(Math.ceil(a/T),s)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=u.length,s=d.length,m=i<s,m&&(s=i),i=0;i<s;i++)if(u[i]!=d[i]){m=u[i]<d[i];break}o=0}for(m&&(e=u,u=d,d=e,t.s=-t.s),s=u.length,i=d.length-s;i>0;--i)u[s++]=0;for(i=d.length;i>o;){if(u[--i]<d[i]){for(r=i;r&&u[--r]===0;)u[r]=te-1;--u[r],u[i]+=te}u[i]-=d[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=tt(u,n),B?w(t,a,c):t):new y(c===3?-0:0)};f.modulo=f.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?w(new i(n),i.precision,i.rounding):(B=!1,i.modulo==9?(e=v(n,t.abs(),0,3,1),e.s*=t.s):e=v(n,t,0,i.modulo,1),e=e.times(t),B=!0,n.minus(e))};f.naturalExponential=f.exp=function(){return Bt(this)};f.naturalLogarithm=f.ln=function(){return Pe(this)};f.negated=f.neg=function(){var t=new this.constructor(this);return t.s=-t.s,w(t)};f.plus=f.add=function(t){var e,n,i,r,o,s,a,c,u,l,m=this,d=m.constructor;if(t=new d(t),!m.d||!t.d)return!m.s||!t.s?t=new d(NaN):m.d||(t=new d(t.d||m.s===t.s?m:NaN)),t;if(m.s!=t.s)return t.s=-t.s,m.minus(t);if(u=m.d,l=t.d,a=d.precision,c=d.rounding,!u[0]||!l[0])return l[0]||(t=new d(m)),B?w(t,a,c):t;if(o=X(m.e/T),i=X(t.e/T),u=u.slice(),r=o-i,r){for(r<0?(n=u,r=-r,s=l.length):(n=l,i=o,s=u.length),o=Math.ceil(a/T),s=o>s?o+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=u.length,r=l.length,s-r<0&&(r=s,n=l,l=u,u=n),e=0;r;)e=(u[--r]=u[r]+l[r]+e)/te|0,u[r]%=te;for(e&&(u.unshift(e),++i),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=tt(u,i),B?w(t,a,c):t};f.precision=f.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ae+t);return n.d?(e=fn(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};f.round=function(){var t=this,e=t.constructor;return w(new e(t),t.e+1,e.rounding)};f.sine=f.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+T,i.rounding=1,n=ki(i,Pn(i,n)),i.precision=t,i.rounding=e,w(de>2?n.neg():n,t,e,!0)):new i(NaN)};f.squareRoot=f.sqrt=function(){var t,e,n,i,r,o,s=this,a=s.d,c=s.e,u=s.s,l=s.constructor;if(u!==1||!a||!a[0])return new l(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(B=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=G(a),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=X((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),i=new l(e)):i=new l(u.toString()),n=(c=l.precision)+3;;)if(o=i,i=o.plus(v(s,o,n+2,1)).times(.5),G(o.d).slice(0,n)===(e=G(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!r&&e=="4999"){if(!r&&(w(o,c+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(w(i,c+1,1),t=!i.times(i).eq(s));break}return B=!0,w(i,c,l.rounding,t)};f.tangent=f.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=v(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,w(de==2||de==4?n.neg():n,t,e,!0)):new i(NaN)};f.times=f.mul=function(t){var e,n,i,r,o,s,a,c,u,l=this,m=l.constructor,d=l.d,b=(t=new m(t)).d;if(t.s*=l.s,!d||!d[0]||!b||!b[0])return new m(!t.s||d&&!d[0]&&!b||b&&!b[0]&&!d?NaN:!d||!b?t.s/0:t.s*0);for(n=X(l.e/T)+X(t.e/T),c=d.length,u=b.length,c<u&&(o=d,d=b,b=o,s=c,c=u,u=s),o=[],s=c+u,i=s;i--;)o.push(0);for(i=u;--i>=0;){for(e=0,r=c+i;r>i;)a=o[r]+b[i]*d[r-i-1]+e,o[r--]=a%te|0,e=a/te|0;o[r]=(o[r]+e)%te|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=tt(o,n),B?w(t,m.precision,m.rounding):t};f.toBinary=function(t,e){return It(this,2,t,e)};f.toDecimalPlaces=f.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Q(t,0,we),e===void 0?e=i.rounding:Q(e,0,8),w(n,t+n.e+1,e))};f.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=ie(i,!0):(Q(t,0,we),e===void 0?e=r.rounding:Q(e,0,8),i=w(new r(i),t+1,e),n=ie(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toFixed=function(t,e){var n,i,r=this,o=r.constructor;return t===void 0?n=ie(r):(Q(t,0,we),e===void 0?e=o.rounding:Q(e,0,8),i=w(new o(r),t+r.e+1,e),n=ie(i,!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toFraction=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,b=this,y=b.d,g=b.constructor;if(!y)return new g(b);if(u=n=new g(1),i=c=new g(0),e=new g(i),o=e.e=fn(y)-b.e-1,s=o%T,e.d[0]=V(10,s<0?T+s:s),t==null)t=o>0?e:u;else{if(a=new g(t),!a.isInt()||a.lt(u))throw Error(Ae+a);t=a.gt(e)?o>0?e:u:a}for(B=!1,a=new g(G(y)),l=g.precision,g.precision=o=y.length*T*2;m=v(a,e,0,1,1),r=n.plus(m.times(i)),r.cmp(t)!=1;)n=i,i=r,r=u,u=c.plus(m.times(r)),c=r,r=e,e=a.minus(m.times(r)),a=r;return r=v(t.minus(n),i,0,1,1),c=c.plus(r.times(u)),n=n.plus(r.times(i)),c.s=u.s=b.s,d=v(u,i,o,1).minus(b).abs().cmp(v(c,n,o,1).minus(b).abs())<1?[u,i]:[c,n],g.precision=l,B=!0,d};f.toHexadecimal=f.toHex=function(t,e){return It(this,16,t,e)};f.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Q(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(B=!1,n=v(n,t,0,e,1).times(t),B=!0,w(n)):(t.s=n.s,n=t),n};f.toNumber=function(){return+this};f.toOctal=function(t,e){return It(this,8,t,e)};f.toPower=f.pow=function(t){var e,n,i,r,o,s,a=this,c=a.constructor,u=+(t=new c(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new c(V(+a,u));if(a=new c(a),a.eq(1))return a;if(i=c.precision,o=c.rounding,t.eq(1))return w(a,i,o);if(e=X(t.e/T),e>=t.d.length-1&&(n=u<0?-u:u)<=yi)return r=bn(c,a,n,i),t.s<0?new c(1).div(r):w(r,i,o);if(s=a.s,s<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=V(+a,u),e=n==0||!isFinite(n)?X(u*(Math.log("0."+G(a.d))/Math.LN10+a.e+1)):new c(n+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(B=!1,c.rounding=a.s=1,n=Math.min(12,(e+"").length),r=Bt(t.times(Pe(a,i+n)),i),r.d&&(r=w(r,i+5,1),Ee(r.d,i,o)&&(e=i+10,r=w(Bt(t.times(Pe(a,e+n)),e),e+5,1),+G(r.d).slice(i+1,i+15)+1==1e14&&(r=w(r,i+1,0)))),r.s=s,B=!0,c.rounding=o,w(r,i,o))};f.toPrecision=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=ie(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(Q(t,1,we),e===void 0?e=r.rounding:Q(e,0,8),i=w(new r(i),t,e),n=ie(i,t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toSignificantDigits=f.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Q(t,1,we),e===void 0?e=i.rounding:Q(e,0,8)),w(new i(n),t,e)};f.toString=function(){var t=this,e=t.constructor,n=ie(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};f.truncated=f.trunc=function(){return w(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var t=this,e=t.constructor,n=ie(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function G(t){var e,n,i,r=t.length-1,o="",s=t[0];if(r>0){for(o+=s,e=1;e<r;e++)i=t[e]+"",n=T-i.length,n&&(o+=ye(n)),o+=i;s=t[e],i=s+"",n=T-i.length,n&&(o+=ye(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function Q(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ae+t)}function Ee(t,e,n,i){var r,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=T,r=0):(r=Math.ceil((e+1)/T),e%=T),o=V(10,T-e),a=t[r]%o|0,i==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(t[r+1]/o/100|0)==V(10,e-2)-1||(a==o/2||a==0)&&(t[r+1]/o/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),s=(i||n<4)&&a==9999||!i&&n>3&&a==4999):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(t[r+1]/o/1e3|0)==V(10,e-3)-1,s}function Qe(t,e,n){for(var i,r=[0],o,s=0,a=t.length;s<a;){for(o=r.length;o--;)r[o]*=e;for(r[0]+=kt.indexOf(t.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function Ai(t,e){var n,i,r;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),r=(1/nt(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=Le(t,1,e.times(r),new t(1));for(var o=n;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var v=function(){function t(i,r,o){var s,a=0,c=i.length;for(i=i.slice();c--;)s=i[c]*r+a,i[c]=s%o|0,a=s/o|0;return a&&i.unshift(a),i}function e(i,r,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(i[a]!=r[a]){c=i[a]>r[a]?1:-1;break}return c}function n(i,r,o,s){for(var a=0;o--;)i[o]-=a,a=i[o]<r[o]?1:0,i[o]=a*s+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s,a,c){var u,l,m,d,b,y,g,K,I,C,h,R,pe,z,fe,be,ge,Fe,j,Be,le=i.constructor,bt=i.s==r.s?1:-1,U=i.d,F=r.d;if(!U||!U[0]||!F||!F[0])return new le(!i.s||!r.s||(U?F&&U[0]==F[0]:!F)?NaN:U&&U[0]==0||!F?bt*0:bt/0);for(c?(b=1,l=i.e-r.e):(c=te,b=T,l=X(i.e/b)-X(r.e/b)),j=F.length,ge=U.length,I=new le(bt),C=I.d=[],m=0;F[m]==(U[m]||0);m++);if(F[m]>(U[m]||0)&&l--,o==null?(z=o=le.precision,s=le.rounding):a?z=o+(i.e-r.e)+1:z=o,z<0)C.push(1),y=!0;else{if(z=z/b+2|0,m=0,j==1){for(d=0,F=F[0],z++;(m<ge||d)&&z--;m++)fe=d*c+(U[m]||0),C[m]=fe/F|0,d=fe%F|0;y=d||m<ge}else{for(d=c/(F[0]+1)|0,d>1&&(F=t(F,d,c),U=t(U,d,c),j=F.length,ge=U.length),be=j,h=U.slice(0,j),R=h.length;R<j;)h[R++]=0;Be=F.slice(),Be.unshift(0),Fe=F[0],F[1]>=c/2&&++Fe;do d=0,u=e(F,h,j,R),u<0?(pe=h[0],j!=R&&(pe=pe*c+(h[1]||0)),d=pe/Fe|0,d>1?(d>=c&&(d=c-1),g=t(F,d,c),K=g.length,R=h.length,u=e(g,h,K,R),u==1&&(d--,n(g,j<K?Be:F,K,c))):(d==0&&(u=d=1),g=F.slice()),K=g.length,K<R&&g.unshift(0),n(h,g,R,c),u==-1&&(R=h.length,u=e(F,h,j,R),u<1&&(d++,n(h,j<R?Be:F,R,c))),R=h.length):u===0&&(d++,h=[0]),C[m++]=d,u&&h[0]?h[R++]=U[be]||0:(h=[U[be]],R=1);while((be++<ge||h[0]!==void 0)&&z--);y=h[0]!==void 0}C[0]||C.shift()}if(b==1)I.e=l,cn=y;else{for(m=1,d=C[0];d>=10;d/=10)m++;I.e=m+l*b-1,w(I,a?o+I.e+1:o,s,y)}return I}}();function w(t,e,n,i){var r,o,s,a,c,u,l,m,d,b=t.constructor;e:if(e!=null){if(m=t.d,!m)return t;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=e-r,o<0)o+=T,s=e,l=m[d=0],c=l/V(10,r-s-1)%10|0;else if(d=Math.ceil((o+1)/T),a=m.length,d>=a)if(i){for(;a++<=d;)m.push(0);l=c=0,r=1,o%=T,s=o-T+1}else break e;else{for(l=a=m[d],r=1;a>=10;a/=10)r++;o%=T,s=o-T+r,c=s<0?0:l/V(10,r-s-1)%10|0}if(i=i||e<0||m[d+1]!==void 0||(s<0?l:l%V(10,r-s-1)),u=n<4?(c||i)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||i||n==6&&(o>0?s>0?l/V(10,r-s):0:m[d-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,u?(e-=t.e+1,m[0]=V(10,(T-e%T)%T),t.e=-e||0):m[0]=t.e=0,t;if(o==0?(m.length=d,a=1,d--):(m.length=d+1,a=V(10,T-o),m[d]=s>0?(l/V(10,r-s)%V(10,s)|0)*a:0),u)for(;;)if(d==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,m[0]==te&&(m[0]=1));break}else{if(m[d]+=a,m[d]!=te)break;m[d--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return B&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function ie(t,e,n){if(!t.isFinite())return yn(t);var i,r=t.e,o=G(t.d),s=o.length;return e?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ye(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):r<0?(o="0."+ye(-r-1)+o,n&&(i=n-s)>0&&(o+=ye(i))):r>=s?(o+=ye(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+ye(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=ye(i))),o}function tt(t,e){var n=t[0];for(e*=T;n>=10;n/=10)e++;return e}function $e(t,e,n){if(e>Pi)throw B=!0,n&&(t.precision=n),Error(ln);return w(new t(Ye),e,1,!0)}function ee(t,e,n){if(e>ht)throw Error(ln);return w(new t(Je),e,n,!0)}function fn(t){var e=t.length-1,n=e*T+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function ye(t){for(var e="";t--;)e+="0";return e}function bn(t,e,n,i){var r,o=new t(1),s=Math.ceil(i/T+4);for(B=!1;;){if(n%2&&(o=o.times(e),an(o.d,s)&&(r=!0)),n=X(n/2),n===0){n=o.d.length-1,r&&o.d[n]===0&&++o.d[n];break}e=e.times(e),an(e.d,s)}return B=!0,o}function sn(t){return t.d[t.d.length-1]&1}function gn(t,e,n){for(var i,r=new t(e[0]),o=0;++o<e.length;)if(i=new t(e[o]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function Bt(t,e){var n,i,r,o,s,a,c,u=0,l=0,m=0,d=t.constructor,b=d.rounding,y=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(B=!1,c=y):c=e,a=new d(.03125);t.e>-2;)t=t.times(a),m+=5;for(i=Math.log(V(2,m))/Math.LN10*2+5|0,c+=i,n=o=s=new d(1),d.precision=c;;){if(o=w(o.times(t),c,1),n=n.times(++l),a=s.plus(v(o,n,c,1)),G(a.d).slice(0,c)===G(s.d).slice(0,c)){for(r=m;r--;)s=w(s.times(s),c,1);if(e==null)if(u<3&&Ee(s.d,c-i,b,u))d.precision=c+=10,n=o=a=new d(1),l=0,u++;else return w(s,d.precision=y,b,B=!0);else return d.precision=y,s}s=a}}function Pe(t,e){var n,i,r,o,s,a,c,u,l,m,d,b=1,y=10,g=t,K=g.d,I=g.constructor,C=I.rounding,h=I.precision;if(g.s<0||!K||!K[0]||!g.e&&K[0]==1&&K.length==1)return new I(K&&!K[0]?-1/0:g.s!=1?NaN:K?0:g);if(e==null?(B=!1,l=h):l=e,I.precision=l+=y,n=G(K),i=n.charAt(0),Math.abs(o=g.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)g=g.times(t),n=G(g.d),i=n.charAt(0),b++;o=g.e,i>1?(g=new I("0."+n),o++):g=new I(i+"."+n.slice(1))}else return u=$e(I,l+2,h).times(o+""),g=Pe(new I(i+"."+n.slice(1)),l-y).plus(u),I.precision=h,e==null?w(g,h,C,B=!0):g;for(m=g,c=s=g=v(g.minus(1),g.plus(1),l,1),d=w(g.times(g),l,1),r=3;;){if(s=w(s.times(d),l,1),u=c.plus(v(s,new I(r),l,1)),G(u.d).slice(0,l)===G(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus($e(I,l+2,h).times(o+""))),c=v(c,new I(b),l,1),e==null)if(Ee(c.d,l-y,C,a))I.precision=l+=y,u=s=g=v(m.minus(1),m.plus(1),l,1),d=w(g.times(g),l,1),r=a=1;else return w(c,I.precision=h,C,B=!0);else return I.precision=h,c;c=u,r+=2}}function yn(t){return String(t.s*t.s/0)}function xt(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(i,r),e){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%T,n<0&&(i+=T),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=T;i<r;)t.d.push(+e.slice(i,i+=T));e=e.slice(i),i=T-e.length}else i-=r;for(;i--;)e+="0";t.d.push(+e),B&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function wi(t,e){var n,i,r,o,s,a,c,u,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),pn.test(e))return xt(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(bi.test(e))n=16,e=e.toLowerCase();else if(fi.test(e))n=2;else if(gi.test(e))n=8;else throw Error(Ae+e);for(o=e.search(/p/i),o>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),s=o>=0,i=t.constructor,s&&(e=e.replace(".",""),a=e.length,o=a-o,r=bn(i,new i(n),o,o*2)),u=Qe(e,n,te),l=u.length-1,o=l;u[o]===0;--o)u.pop();return o<0?new i(t.s*0):(t.e=tt(u,l),t.d=u,B=!1,s&&(t=v(t,r,a*4)),c&&(t=t.times(Math.abs(c)<54?V(2,c):Oe.pow(2,c))),B=!0,t)}function ki(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Le(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/nt(5,n)),e=Le(t,2,e,e);for(var r,o=new t(5),s=new t(16),a=new t(20);n--;)r=e.times(e),e=e.times(o.plus(r.times(s.times(r).minus(a))));return e}function Le(t,e,n,i,r){var o,s,a,c,u=1,l=t.precision,m=Math.ceil(l/T);for(B=!1,c=n.times(n),a=new t(i);;){if(s=v(a.times(c),new t(e++*e++),l,1),a=r?i.plus(s):i.minus(s),i=v(s.times(c),new t(e++*e++),l,1),s=a.plus(i),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=i,i=s,s=o,u++}return B=!0,s.d.length=m+1,s}function nt(t,e){for(var n=t;--e;)n*=t;return n}function Pn(t,e){var n,i=e.s<0,r=ee(t,t.precision,1),o=r.times(.5);if(e=e.abs(),e.lte(o))return de=i?4:1,e;if(n=e.divToInt(r),n.isZero())de=i?3:2;else{if(e=e.minus(n.times(r)),e.lte(o))return de=sn(n)?i?2:3:i?4:1,e;de=sn(n)?i?1:4:i?3:2}return e.minus(r).abs()}function It(t,e,n,i){var r,o,s,a,c,u,l,m,d,b=t.constructor,y=n!==void 0;if(y?(Q(n,1,we),i===void 0?i=b.rounding:Q(i,0,8)):(n=b.precision,i=b.rounding),!t.isFinite())l=yn(t);else{for(l=ie(t),s=l.indexOf("."),y?(r=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):r=e,s>=0&&(l=l.replace(".",""),d=new b(1),d.e=l.length-s,d.d=Qe(ie(d),10,r),d.e=d.d.length),m=Qe(l,10,r),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=y?"0p+0":"0";else{if(s<0?o--:(t=new b(t),t.d=m,t.e=o,t=v(t,d,n,i,0,r),m=t.d,o=t.e,u=cn),s=m[n],a=r/2,u=u||m[n+1]!==void 0,u=i<4?(s!==void 0||u)&&(i===0||i===(t.s<0?3:2)):s>a||s===a&&(i===4||u||i===6&&m[n-1]&1||i===(t.s<0?8:7)),m.length=n,u)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=kt.charAt(m[s]);if(y){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)l+="0";for(m=Qe(l,r,e),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=kt.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(e==16?"0x":e==2?"0b":e==8?"0o":"")+l}return t.s<0?"-"+l:l}function an(t,e){if(t.length>e)return t.length=e,!0}function Ti(t){return new this(t).abs()}function hi(t){return new this(t).acos()}function Bi(t){return new this(t).acosh()}function xi(t,e){return new this(t).plus(e)}function Ii(t){return new this(t).asin()}function Si(t){return new this(t).asinh()}function Ci(t){return new this(t).atan()}function Ki(t){return new this(t).atanh()}function Ni(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=ee(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?ee(this,i,r):new this(0),n.s=t.s):!t.d||e.isZero()?(n=ee(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(v(t,e,o,1)),e=ee(this,o,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(v(t,e,o,1)),n}function Li(t){return new this(t).cbrt()}function Ri(t){return w(t=new this(t),t.e+1,2)}function Mi(t,e,n){return new this(t).clamp(e,n)}function vi(t){if(!t||typeof t!="object")throw Error(et+"Object expected");var e,n,i,r=t.defaults===!0,o=["precision",1,we,"rounding",0,8,"toExpNeg",-Ne,0,"toExpPos",0,Ne,"maxE",0,Ne,"minE",-Ne,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],r&&(this[n]=Tt[n]),(i=t[n])!==void 0)if(X(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(Ae+n+": "+i);if(n="crypto",r&&(this[n]=Tt[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(mn);else this[n]=!1;else throw Error(Ae+n+": "+i);return this}function Fi(t){return new this(t).cos()}function Ei(t){return new this(t).cosh()}function An(t){var e,n,i;function r(o){var s,a,c,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,un(o)){u.s=o.s,B?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;B?s>r.maxE?(u.e=NaN,u.d=null):s<r.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return xt(u,o.toString())}else if(c!=="string")throw Error(Ae+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),pn.test(o)?xt(u,o):wi(u,o)}if(r.prototype=f,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=vi,r.clone=An,r.isDecimal=un,r.abs=Ti,r.acos=hi,r.acosh=Bi,r.add=xi,r.asin=Ii,r.asinh=Si,r.atan=Ci,r.atanh=Ki,r.atan2=Ni,r.cbrt=Li,r.ceil=Ri,r.clamp=Mi,r.cos=Fi,r.cosh=Ei,r.div=Oi,r.exp=Di,r.floor=Wi,r.hypot=Vi,r.ln=_i,r.log=qi,r.log10=Ui,r.log2=Gi,r.max=Xi,r.min=Hi,r.mod=zi,r.mul=ji,r.pow=Zi,r.random=Qi,r.round=Yi,r.sign=Ji,r.sin=$i,r.sinh=er,r.sqrt=tr,r.sub=nr,r.sum=ir,r.tan=rr,r.tanh=or,r.trunc=sr,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function Oi(t,e){return new this(t).div(e)}function Di(t){return new this(t).exp()}function Wi(t){return w(t=new this(t),t.e+1,3)}function Vi(){var t,e,n=new this(0);for(B=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return B=!0,new this(1/0);n=e}return B=!0,n.sqrt()}function un(t){return t instanceof Oe||t&&t.toStringTag===dn||!1}function _i(t){return new this(t).ln()}function qi(t,e){return new this(t).log(e)}function Gi(t){return new this(t).log(2)}function Ui(t){return new this(t).log(10)}function Xi(){return gn(this,arguments,"lt")}function Hi(){return gn(this,arguments,"gt")}function zi(t,e){return new this(t).mod(e)}function ji(t,e){return new this(t).mul(e)}function Zi(t,e){return new this(t).pow(e)}function Qi(t){var e,n,i,r,o=0,s=new this(1),a=[];if(t===void 0?t=this.precision:Q(t,1,we),i=Math.ceil(t/T),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)r=e[o],r>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)r=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(r%1e7),o+=4);o=i/4}else throw Error(mn);else for(;o<i;)a[o++]=Math.random()*1e7|0;for(i=a[--o],t%=T,i&&t&&(r=V(10,T-t),a[o]=(i/r|0)*r);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=T)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<T&&(n-=T-i)}return s.e=n,s.d=a,s}function Yi(t){return w(t=new this(t),t.e+1,this.rounding)}function Ji(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function $i(t){return new this(t).sin()}function er(t){return new this(t).sinh()}function tr(t){return new this(t).sqrt()}function nr(t,e){return new this(t).sub(e)}function ir(){var t=0,e=arguments,n=new this(e[t]);for(B=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return B=!0,w(n,this.precision,this.rounding)}function rr(t){return new this(t).tan()}function or(t){return new this(t).tanh()}function sr(t){return w(t=new this(t),t.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var Oe=f.constructor=An(Tt);Ye=new Oe(Ye);Je=new Oe(Je);var L=Oe;import fr from"big.js";import ta from"bn.js";import ar from"toformat";var ur=ar,De=ur;import rt from"big.js";import lr from"bn.js";import mr from"decimal.js-light";import We from"bn.js";var wn=9007199254740991;function re(t){let e=H("Raydium_parseBigNumberish");if(t instanceof We)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new We(t);e.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&e.logWithError(`BigNumberish number underflow: ${t}`),(t>=wn||t<=-wn)&&e.logWithError(`BigNumberish number overflow: ${t}`),new We(String(t))):typeof t=="bigint"?new We(t.toString()):(e.error(`invalid BigNumberish value: ${t}`),new We(0))}var it=H("module/fraction"),St=De(rt),Ve=De(mr),dr={[0]:Ve.ROUND_DOWN,[1]:Ve.ROUND_HALF_UP,[2]:Ve.ROUND_UP},pr={[0]:rt.roundDown,[1]:rt.roundHalfUp,[2]:rt.roundUp},E=class{constructor(e,n=new lr(1)){this.numerator=re(e),this.denominator=re(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new E(this.denominator,this.numerator)}add(e){let n=e instanceof E?e:new E(re(e));return this.denominator.eq(n.denominator)?new E(this.numerator.add(n.numerator),this.denominator):new E(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(e){let n=e instanceof E?e:new E(re(e));return this.denominator.eq(n.denominator)?new E(this.numerator.sub(n.numerator),this.denominator):new E(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(e){let n=e instanceof E?e:new E(re(e));return new E(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(e){let n=e instanceof E?e:new E(re(e));return new E(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(e,n={groupSeparator:""},i=1){Number.isInteger(e)||it.logWithError(`${e} is not an integer.`),e<=0&&it.logWithError(`${e} is not positive.`),Ve.set({precision:e+1,rounding:dr[i]});let r=new Ve(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return r.toFormat(r.decimalPlaces(),n)}toFixed(e,n={groupSeparator:""},i=1){return Number.isInteger(e)||it.logWithError(`${e} is not an integer.`),e<0&&it.logWithError(`${e} is negative.`),St.DP=e,St.RM=pr[i]||1,new St(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,n)}isZero(){return this.numerator.isZero()}};var la=H("Raydium_amount"),ma=De(fr);import{PublicKey as gr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as kn}from"@solana/spl-token";var Ct={chainId:101,address:gr.default.toBase58(),programId:kn.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},ke={chainId:101,address:"So11111111111111111111111111111111111111112",programId:kn.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as Lt}from"@solana/web3.js";import{PublicKey as D,SystemProgram as Tn,SYSVAR_RENT_PUBKEY as yr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Pr}from"@solana/spl-token";function Kt({pubkey:t,isSigner:e=!1,isWritable:n=!0}){return{pubkey:t,isWritable:n,isSigner:e}}var Aa=[Kt({pubkey:Pr,isWritable:!1}),Kt({pubkey:Tn.programId,isWritable:!1}),Kt({pubkey:yr,isWritable:!1})];function hn({publicKey:t,transformSol:e}){let n=Bn(t.toString());if(n instanceof D)return e&&n.equals(_e)?Ze:n;if(e&&n.toString()===_e.toBase58())return Ze;if(typeof n=="string"){if(n===D.default.toBase58())return D.default;try{return new D(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Bn(t){try{return new D(t)}catch{return t}}var Ar=new D("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),wr=new D("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Nt=new D("SysvarRent111111111111111111111111111111111"),wa=new D("SysvarC1ock11111111111111111111111111111111"),ot=new D("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),ka=new D("Sysvar1nstructions1111111111111111111111111"),Ta=Tn.programId,ha=new D("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ba=new D("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),xa=new D("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ia=new D("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Sa=new D("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ca=new D("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ka=new D("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Na=new D("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),La=new D("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ra=new D("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ma=new D("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Ze=new D("So11111111111111111111111111111111111111112"),_e=D.default;var Rt=class{constructor({mint:e,decimals:n,symbol:i,name:r,skipMint:o=!1,isToken2022:s=!1}){if(e===_e.toBase58()||e instanceof Lt&&_e.equals(e)){this.decimals=ke.decimals,this.symbol=ke.symbol,this.name=ke.name,this.mint=new Lt(ke.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=i||e.toString().substring(0,6),this.name=r||e.toString().substring(0,6),this.mint=o?Lt.default:hn({publicKey:e}),this.isToken2022=s}equals(e){return this===e?!0:this.mint.equals(e.mint)}},Te=Rt;Te.WSOL=new Rt(q(W({},ke),{mint:ke.address}));var Mt=class{constructor({decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=n,this.name=i}equals(e){return this===e}},st=Mt;st.SOL=new Mt(Ct);import kr from"bn.js";var Xa=new E(new kr(100));var Ya=H("Raydium_price");import{PublicKey as fu}from"@solana/web3.js";import gu from"bn.js";var Tr=new oe(0),vu=new oe(1),Fu=new oe(2),Eu=new oe(3),Ou=new oe(5),br=new oe(10),Du=new oe(100),Wu=new oe(1e3),Vu=new oe(1e4);function xn(t,e,n){return t.mul(e).add(n).sub(new oe(1)).div(n)}import{PublicKey as lc}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as dc}from"@solana/spl-token";import{ComputeBudgetProgram as ju,Keypair as Yu,PublicKey as hr,Transaction as $u,TransactionMessage as tc,VersionedTransaction as nc}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as sc}from"@solana/spl-token";var ac=H("Raydium_txUtil");function se(t,e){let[n,i]=hr.findProgramAddressSync(t,e);return{publicKey:n,nonce:i}}import{PublicKey as x}from"@solana/web3.js";var gc=new x("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),yc=new x("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Pc=new x("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Ac=new x("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),wc=new x("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),kc=new x("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Tc=new x("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),hc=new x("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Bc=new x("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),xc=new x("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Br=new x("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),xr=new x("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Ir=new x("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Ic=new x("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Sc=new x("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Cc=new x("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Kc=new x("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Nc=new x("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Lc=new x("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Rc=new x("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Mc=new x("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),vc=new x("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Sr=new x("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),Cr=new x("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),Kr=new x("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2"),Fc=new x("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Nr=new x("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),Ec=new x("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Lr=new x("7AFUeLVRjBfzqK3tTGw8hN48KLQWSk6DTE8xprWdPqix"),Rr=new x("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Oc=new x("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Mr=new x("LanD8FpTBBvzZFXjTxsAoipkFsxPUCDB4qAqKxYDiNP"),vr=new x("HYNHiyKJ3gGVFvyxJAurK7qr7P2o5J9THmvCGMdULtpW");var Dc={AMM_V4:new x("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AMM_STABLE:new x("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM_PROGRAM_ID:new x("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),CLMM_LOCK_PROGRAM_ID:new x("DLockwT7X7sxtLmGH9g5kmfcjaBtncdbUmi738m5bvQC"),CLMM_LOCK_AUTH_ID:new x("8qmHNvu2Kr2C7U8mJL4Vz1vTDxMhVuXKREwU7TNoaVEo"),FARM_PROGRAM_ID_V3:new x("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FARM_PROGRAM_ID_V5:new x("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FARM_PROGRAM_ID_V6:new x("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),OPEN_BOOK_PROGRAM:new x("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:x.default,UTIL1216:x.default,Router:new x("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),CREATE_CPMM_POOL_PROGRAM:Sr,CREATE_CPMM_POOL_AUTH:Cr,CREATE_CPMM_POOL_FEE_ACC:Kr,LOCK_CPMM_PROGRAM:Nr,LOCK_CPMM_AUTH:Lr,LAUNCHPAD_PROGRAM:Mr,LAUNCHPAD_AUTH:vr,FEE_DESTINATION_ID:new x("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR")};import ut from"bn.js";function ct(t,e){if(t.isZero())return new ut(0);let n=t.div(e);return n.isZero()?new ut(1):t.mod(e).gt(new ut(0))?n.add(new ut(1)):n}import{PublicKey as Fr,AddressLookupTableAccount as In}from"@solana/web3.js";var Er={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new In({key:new Fr("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:In.deserialize(Buffer.from("AQAAAP//////////I1rcEwAAAAAvAQYwun9CU6c5Ikm2pAj+D9IEnCOR45nK+SFTGSdpd6J6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpBt324e51j94YQl285GzN2rYa/E2DuQ0n/r35KNihi/wFSlNQ+F3IgtYUpVZyeIopbd8eq6vQpgZ4iEky9O72oAVKU1qZKSEGTSTocWDaOHx8NbXdvJK7geQfqEBBBUSNBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvBkX2T9y7AHdNGviJAqQNtlDUDCnauQRWybsLji6nPM8Qkw5asQRvCdB3MbX6IEBwytOrpM32l4jQygKG9TKgR0vZScQ2AsM/IHeQ7RajUkyhuZdc8SGiqQz/7H34torNR/Wir3sl0ruUrVxJWEZfUg+QLNAxxODdBi53/OP7Ioil1cqeBM9dtZC3FLov4yyxWRM/wcGStyJX/QfTnLBAHqkqWotPKVlShCVQqpP9W5W1rOao65IMk5QuQ2kMIOxzDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu/YsA/yfEEFGcr8Z57VKDw8uQzpiru7g4lvjnfapW62W030syevD8k07SGoxUHiuT/ai7gAHWWhDsVmg/C63ajgpkH7Sn3GdutArDTfyqOkdqv4/IPC/EFFy7mGkfDd2C57N5a/4jC+BbmJy7wQaSEZr0CQU88lPtUxIVvzGjC95b8Ooss2TqmkrayGKofkPMGQn7Ux+9lfwBSNfxwH8NgbpqC/7LNlV4I7nCvsXf3p+ohQk9NrAJb2KAFpUqEIJ9ZBV7BYDzHF/ORKYlgtvPnXjudZQ6CEo5OzUDaNIomTCCsvhD16TxJjsbgne1kGnQPCFSoaxUbq2V1bPMFQ3VYP6wDZ9bKStCFKx9A3tNbwZFC5ZGAN83MFK7XoTy+OmmcFEr6rLOjfSuTfPvHJkSVxW6Qllwkl67XcBi5v00u2gQsbu+38sp+rd5pA/LvyWj4P94ZGZwc1tE2P88xekCLcAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAAn+HWRkdcPKyFFMnVwEoD7vnD0jCKFIU1sImubYCxNTSVzsKpaQX+fzNxrLAI3L14JQnJx/D6Uk2LADIHGqnGELzjEbkBDAlaM77NkXMPfqXNLSveCkWI7UEgNs31WEWB6XHSYI/v5DklHOb4QTtDOR804PVbi3fjloZeLR2F8d4FuZmMMO7ck3Fnkn2zEMG5gOmqsygb6PjTitArVl52NhcSznTxVnguaIJxiZkAnurDmn3MWR0PC2GLghp2KJqHCc6QQ85odeIjFHKOlRlJyeSXVJmL8vb1UgOzsbJPVP8p6zM4M3C1Sd7uWIHP33G42AP2Zg8ucn/n6meQjjD266JgCWdxZD6PXs9CsnIeL7SSG0/6lGb9xfP0ZcWkCXB/3hjxHYVXjra/GPOeXGk0fLLKjCbk+mgs2w6d2oCwimBipTzuoZ30GiI8ij8VRzD5CzMWtu2m21eDBIfjGAEo4pQeNNonKcqzV/cleX8ySZLOHsz8PtBCrLqF+VkLm9hOzIT+6i/nIf6keR4GWKMOD4AvqfpjHoD4DuhBpz8P28+DxkGrDXXr/nr20x291VPvcTU/b+b+o2kC9G0kcXeTlLjU6a2TQXWlZ4gBUdBl1jgT7mObSTpLblNiXZsLkbmVXZwvFKXua5cUKlWed/w30skmEUraTuQqtqr5fHZPW9n57EmeTif6LjHL2YJFZkQU+TrJmFzqzmF4/b8OwrPQAprl8mX3q4LUIdAS/a+11B6DWD1Xk2++Sn94dLC4xjkO4Wtlw8c4XuzciVbepHOmnoWzVu/0y3KCrLCSfQxQ3br8DJCoVzhgtPsS2nZZjsBGIZgnU0QpMv+2MnRsnKwdp1VsrCX84j/qvaZn4WhKunippgTbN2EUs0tPTP55Qfgj+nKmjtWW5IYs72FrEwJKYoNfsmqaF4o5pf4v9zgPwVwY/5I4XJKUL2L25m9kAQcW/K+H1RTFEUoj8Z4ajpOmAB/dG0COmCphVMW2CCMvnxhcGiSgPnpDuWu6qiJ7NG7ye5kvHgefgqPLeicspNJ5EpL3XiRNLM2tmJLI1awAwOyd6iHv0dCkMYRKaa6rcaZeYwmKCkckm0kM2JNmnmmAaBQQ7mwmIM0IMxX4f5W6j9PqZWcJxF7r17T/lQBAmcjoupRiJifbnXCNUv9GhpRF19WcBdeKbivRJVlGop6I2RS6lGImJ9udcI1S/0aGlEXX1ZwF14puK9ElWUainojZFYVHLHD6dIP2ESjqBzg3ol1/wB7+/ylGwd9LS7wSZ2A630CJSVKwH47K9P4bB8PEQP8BwjMFa7xQHOqZFP1XqaQ==","base64"))})};import{PublicKey as Or,sendAndConfirmTransaction as nl,SystemProgram as ol,Transaction as sl,TransactionMessage as ul,VersionedTransaction as cl}from"@solana/web3.js";import ml from"axios";import{LAMPORTS_PER_SOL as Dr}from"@solana/web3.js";var yl=.001*Dr,Pl=["4ACfpUFoaSD9bfPdeu6DBt89gB6ENTeHBXCAi87NhDEE","D2L6yPZ2FmmmTKPgzaMKdhu6EWZcTpLy1Vhx8uvZe7NZ","9bnz4RShgq1hAnLnZbP8kbgBg1kEmcJBYQq3gQbmnSta","5VY91ws6B2hMmBFRsXkoAAdsPHBJwRfBht4DXox3xkwn","2nyhqdwKcJZR2vcqCyrYsaPVdAnFoJjiksCXJ7hfEYgD","2q5pghRs6arqVjRvT5gfgWfWcHWmw1ZuCzphgd5KfWGJ","wyvPkWjVZz1M8fHQnMMCDTQDbkManefNNhweYk5WkcF","3KCKozbAaF75qEU33jtzozcJ29yJuaLJTy2jFdzUY8bT","4vieeGHPYPG2MmyPRcYjdiDmmhN3ww7hsFNap8pVN3Ey","4TQLFNWK8AovT1gFvda5jfw2oJeRMKEmw7aH6MGBJ3or"].map(t=>new Or(t));import Wr from"bn.js";var Ie=new Wr(1e6);import{PublicKey as Wp}from"@solana/web3.js";import _p from"bn.js";import{AccountLayout as Xp,TOKEN_2022_PROGRAM_ID as Hp,TOKEN_PROGRAM_ID as zp}from"@solana/spl-token";import{PublicKey as Gl}from"@solana/web3.js";import{MintLayout as Xl,TOKEN_PROGRAM_ID as zl}from"@solana/spl-token";import{Keypair as cp,PublicKey as lp,SystemProgram as dp,TransactionInstruction as pp}from"@solana/web3.js";import bp from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Pp,TOKEN_2022_PROGRAM_ID as Ap,TOKEN_PROGRAM_ID as wp}from"@solana/spl-token";import qd from"bn.js";import J from"bn.js";var Ot=new J(0),Nn=new J(1),Ln=new J(-1),ne=new J(1).shln(64),Rn=new J(1).shln(128),Dt=ne.sub(Nn);var Vr=Rn.subn(1),Re=-443636,qe=-Re,Wt=new J("4295048016"),Vt=new J("79226673521066979257578248091"),om=new J("4295048017"),sm=new J("79226673521066979257578248090");var _r=new J(10).pow(new J(6));var am=new J("18446744073700000000");import Cd from"bn.js";function _t(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t,!1),new Uint8Array(e)}var pm=Buffer.from("amm_config","utf8"),fm=Buffer.from("pool","utf8"),bm=Buffer.from("pool_vault","utf8"),gm=Buffer.from("pool_reward_vault","utf8"),ym=Buffer.from("position","utf8"),Pm=Buffer.from("tick_array","utf8"),Am=Buffer.from("operation","utf8"),wm=Buffer.from("pool_tick_array_bitmap_extension","utf8"),km=Buffer.from("observation","utf8");var Tm=Buffer.from("locked_position","utf8");var hm=Buffer.from("support_mint","utf8");import{PublicKey as nd}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as rd}from"@solana/spl-token";import sd from"bn.js";import Im from"bn.js";var Ut=14;var lt=60;var Xr=S([Z(8),N("bump"),xe("index"),k(""),Ke("protocolFeeRate"),Ke("tradeFeeRate"),xe("tickSpacing"),M(p(),8,"")]),Hr=S([Ke("blockTimestamp"),en("tickCumulative"),M(p(),4)]),Gn=S([Z(8),At("initialized"),p("recentEpoch"),xe("observationIndex"),k("poolId"),M(Hr,100,"observations"),M(p(),4)]),zr=S([N("rewardState"),p("openTime"),p("endTime"),p("lastUpdateTime"),O("emissionsPerSecondX64"),p("rewardTotalEmissioned"),p("rewardClaimed"),k("tokenMint"),k("tokenVault"),k("creator"),O("rewardGrowthGlobalX64")]),Vn=S([Z(8),N("bump"),k("ammConfig"),k("creator"),k("mintA"),k("mintB"),k("vaultA"),k("vaultB"),k("observationId"),N("mintDecimalsA"),N("mintDecimalsB"),xe("tickSpacing"),O("liquidity"),O("sqrtPriceX64"),me("tickCurrent"),Ke(),O("feeGrowthGlobalX64A"),O("feeGrowthGlobalX64B"),p("protocolFeesTokenA"),p("protocolFeesTokenB"),O("swapInAmountTokenA"),O("swapOutAmountTokenB"),O("swapInAmountTokenB"),O("swapOutAmountTokenA"),N("status"),M(N(),7,""),M(zr,3,"rewardInfos"),M(p(),16,"tickArrayBitmap"),p("totalFeesTokenA"),p("totalFeesClaimedTokenA"),p("totalFeesTokenB"),p("totalFeesClaimedTokenB"),p("fundFeesTokenA"),p("fundFeesTokenB"),p("startTime"),M(p(),15*4-3,"padding")]),jr=S([O("growthInsideLastX64"),p("rewardAmountOwed")]),_n=S([Z(8),N("bump"),k("nftMint"),k("poolId"),me("tickLower"),me("tickUpper"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),p("tokenFeesOwedA"),p("tokenFeesOwedB"),M(jr,3,"rewardInfos"),M(p(),8,"")]),Jd=S([Z(8),N("bump"),k("poolId"),me("tickLowerIndex"),me("tickUpperIndex"),O("liquidity"),O("feeGrowthInsideLastX64A"),O("feeGrowthInsideLastX64B"),p("tokenFeesOwedA"),p("tokenFeesOwedB"),M(O(),3,"rewardGrowthInside"),M(p(),8,"")]),Zr=S([me("tick"),tn("liquidityNet"),O("liquidityGross"),O("feeGrowthOutsideX64A"),O("feeGrowthOutsideX64B"),M(O(),3,"rewardGrowthsOutsideX64"),M(Ke(),13,"")]),En=S([Z(8),k("poolId"),me("startTickIndex"),M(Zr,lt,"ticks"),N("initializedTickCount"),M(N(),115,"")]),Qr=S([Z(329),M(k(),100,"whitelistMints")]),Ur=S([Z(8),k("poolId"),M(M(p(),8),Ut,"positiveTickArrayBitmap"),M(M(p(),8),Ut,"negativeTickArrayBitmap")]),$d=S([p(),N("bump"),k("owner"),k("poolId"),k("positionId"),k("nftAccount"),M(p(),8)]),ep=S([Z(8),N("bump"),k("lockOwner"),k("poolId"),k("positionId"),k("nftAccount"),k("lockNftMint"),p("recentEpoch"),M(p(),8)]);Gn.span;var Kp=H("Raydium_Clmm");var no=Buffer.from("vault_auth_seed","utf8"),io=Buffer.from("global_config","utf8"),ro=Buffer.from("pool","utf8"),oo=Buffer.from("pool_vault","utf8"),so=Buffer.from("pool_vesting","utf8"),ao=Buffer.from("platform_config","utf8");function uo(t){return se([no],t)}function Mf(t,e,n,i){return se([io,e.toBuffer(),mo(n),_t(i)],t)}function co(t,e,n){return se([ro,e.toBuffer(),n.toBuffer()],t)}function lo(t,e,n){return se([oo,e.toBuffer(),n.toBuffer()],t)}function mo(t){let e=new ArrayBuffer(1);return new DataView(e).setUint8(0,t),new Uint8Array(e)}function Me(t){return se([Buffer.from("__event_authority","utf8")],t)}function po(t,e){return se([ao,e.toBuffer()],t)}function fo(t,e,n){return se([so,e.toBuffer(),n.toBuffer()],t)}var ue={initialize:Buffer.from([175,175,109,31,13,152,155,237]),buyExactIn:Buffer.from([250,234,13,123,213,156,19,236]),buyExactOut:Buffer.from([24,211,116,40,105,3,153,56]),sellExactIn:Buffer.from([149,39,222,155,211,124,152,26]),sellExactOut:Buffer.from([95,200,71,34,8,9,11,166]),createVestingAccount:Buffer.from([129,178,2,13,217,172,230,218]),claimVestedToken:Buffer.from([49,33,104,30,189,157,79,35]),createPlatformConfig:Buffer.from([176,90,196,175,253,113,220,20]),claimPlatformFee:Buffer.from([156,39,208,135,76,237,61,72]),updatePlaformConfig:Buffer.from([195,60,76,129,146,45,67,143])};function bo(t,e,n,i,r,o,s,a,c,u,l,m,d,b,y,g,K,I,C,h,R,pe){let z=S([N("decimals"),$("name"),$("symbol"),$("uri")]),fe=S([p("totalLockedAmount"),p("cliffPeriod"),p("unlockPeriod")]),be=S([N("index"),p("supply"),p("totalFundRaisingB"),N("migrateType")]),ge=S([N("index"),p("supply"),p("totalSellA"),p("totalFundRaisingB"),N("migrateType")]),Fe=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:ot,isSigner:!1,isWritable:!1},{pubkey:Xe.programId,isSigner:!1,isWritable:!1},{pubkey:Nt,isSigner:!1,isWritable:!1},{pubkey:Me(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}],j=Buffer.alloc(Buffer.from(g,"utf-8").length+Buffer.from(K,"utf-8").length+Buffer.from(I,"utf-8").length+4*3+1),Be=Buffer.alloc(fe.span),le=Buffer.alloc(C.type==="ConstantCurve"?ge.span:be.span);return z.encode({decimals:y,name:g,symbol:K,uri:I},j),C.type==="ConstantCurve"?ge.encode(q(W({index:0},C),{migrateType:C.migrateType==="amm"?0:1}),le):C.type==="FixedCurve"?be.encode(q(W({index:1},C),{migrateType:C.migrateType==="amm"?0:1}),le):C.type==="LinearCurve"&&be.encode(q(W({index:2},C),{migrateType:C.migrateType==="amm"?0:1}),le),fe.encode({totalLockedAmount:h,cliffPeriod:R,unlockPeriod:pe},Be),new ae({keys:Fe,programId:t,data:Buffer.from([...ue.initialize,...j,...le,...Be])})}function go(t,e,n,i,r,o,s,a,c,u,l,m,d,b,y,g,K,I){let C=S([p("amountB"),p("minAmountA"),p("shareFeeRate")]),h=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Me(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];I&&h.push({pubkey:I,isSigner:!1,isWritable:!0}),console.log({amountB:y.toString(),minAmountA:g.toString()});let R=Buffer.alloc(C.span);return C.encode({amountB:y,minAmountA:g,shareFeeRate:K!=null?K:new mt(0)},R),new ae({keys:h,programId:t,data:Buffer.from([...ue.buyExactIn,...R])})}function Gf(t,e,n,i,r,o,s,a,c,u,l,m,d,b,y,g,K,I){let C=S([p("amountA"),p("maxAmountB"),p("shareFeeRate")]),h=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Me(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];I&&h.push({pubkey:I,isSigner:!1,isWritable:!0});let R=Buffer.alloc(C.span);return C.encode({amountA:y,maxAmountB:g,shareFeeRate:K!=null?K:new mt(0)},R),new ae({keys:h,programId:t,data:Buffer.from([...ue.buyExactOut,...R])})}function yo(t,e,n,i,r,o,s,a,c,u,l,m,d,b,y,g,K,I){let C=S([p("amountA"),p("minAmountB"),p("shareFeeRate")]),h=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Me(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];I&&h.push({pubkey:I,isSigner:!1,isWritable:!0});let R=Buffer.alloc(C.span);return C.encode({amountA:y,minAmountB:g,shareFeeRate:K!=null?K:new mt(0)},R),new ae({keys:h,programId:t,data:Buffer.from([...ue.sellExactIn,...R])})}function Uf(t,e,n,i,r,o,s,a,c,u,l,m,d,b,y,g,K,I){let C=S([p("amountB"),p("maxAmountA"),p("shareFeeRate")]),h=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Me(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];I&&h.push({pubkey:I,isSigner:!1,isWritable:!0});let R=Buffer.alloc(C.span);return C.encode({amountB:y,maxAmountA:g,shareFeeRate:K!=null?K:new mt(0)},R),new ae({keys:h,programId:t,data:Buffer.from([...ue.sellExactOut,...R])})}function Po(t,e,n,i,r,o,s,a,c){let u=S([]),l=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:Xe.programId,isSigner:!1,isWritable:!1},{pubkey:Xn,isSigner:!1,isWritable:!1}],m=Buffer.alloc(u.span);return u.encode({},m),new ae({keys:l,programId:t,data:Buffer.from([...ue.claimVestedToken,...m])})}function Ao(t,e,n,i,r,o){let s=S([p("shareAmount")]),a=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Xe.programId,isSigner:!1,isWritable:!1}],c=Buffer.alloc(s.span);return s.encode({shareAmount:o},c),new ae({keys:a,programId:t,data:Buffer.from([...ue.createVestingAccount,...c])})}function wo(t,e,n,i,r,o,s,a,c){let u=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:Xe.programId,isSigner:!1,isWritable:!0},{pubkey:Xn,isSigner:!1,isWritable:!0}];return new ae({keys:u,programId:t,data:ue.claimPlatformFee})}function ko(t,e,n,i,r,o,s,a,c,u,l){let m=S([p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),$("name"),$("web"),$("img")]),d=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Xe.programId,isSigner:!1,isWritable:!1}],b=Buffer.alloc(8*4+Buffer.from(c,"utf-8").length+Buffer.from(u,"utf-8").length+Buffer.from(l,"utf-8").length+4*3);return m.encode({platformScale:s.platformScale,creatorScale:s.creatorScale,burnScale:s.burnScale,feeRate:a,name:c,web:u,img:l},b),new ae({keys:d,programId:t,data:Buffer.from([...ue.createPlatformConfig,...b])})}function To(t,e,n,i){let r=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0}],o;if(i.type==="updateClaimFeeWallet"){let s=S([N("index"),k("value")]);o=Buffer.alloc(s.span),s.encode({index:0,value:i.value},o)}else if(i.type==="updateLockNftWallet"){let s=S([N("index"),k("value")]);o=Buffer.alloc(s.span),s.encode({index:1,value:i.value},o)}else if(i.type==="migrateCpLockNftScale"){let s=S([N("index"),p("platformScale"),p("creatorScale"),p("burnScale")]);o=Buffer.alloc(s.span),s.encode(W({index:2},i.value),o)}else if(i.type==="updateFeeRate"){let s=S([N("index"),p("value")]);o=Buffer.alloc(s.span),s.encode({index:3,value:i.value},o)}else if(i.type==="updateImg"||i.type==="updateName"||i.type==="updateWeb"){let s=S([N("index"),$("value")]);o=Buffer.alloc(Buffer.from(i.value,"utf-8").length+4+1*1),i.type==="updateName"?s.encode({index:4,value:i.value},o):i.type==="updateWeb"?s.encode({index:5,value:i.value},o):i.type==="updateImg"&&s.encode({index:6,value:i.value},o)}else if(i.type==="updateCpConfigId"){r.push({pubkey:i.value,isSigner:!1,isWritable:!1});let s=S([N("index")]);o=Buffer.alloc(s.span),s.encode({index:7},o)}else if(i.type==="updateAll"){console.log("Please note that this update will overwrite all data in the platform account with the new data."),r.push({pubkey:i.value.cpConfigId,isSigner:!1,isWritable:!1});let s=S([N("index"),k("platformClaimFeeWallet"),k("platformLockNftWallet"),p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),$("name"),$("web"),$("img")]);o=Buffer.alloc(1+32+32+8*4+4*3+Buffer.from(i.value.name,"utf-8").length+Buffer.from(i.value.web,"utf-8").length+Buffer.from(i.value.img,"utf-8").length),s.encode({index:8,platformClaimFeeWallet:i.value.platformClaimFeeWallet,platformLockNftWallet:i.value.platformLockNftWallet,platformScale:i.value.migrateCpLockNftScale.platformScale,creatorScale:i.value.migrateCpLockNftScale.creatorScale,burnScale:i.value.migrateCpLockNftScale.burnScale,feeRate:i.value.feeRate,name:i.value.name,web:i.value.web,img:i.value.img},o)}else throw Error("updateInfo params type error");return new ae({keys:r,programId:t,data:Buffer.from([...ue.updatePlaformConfig,...o])})}var ho=S([p(),p("epoch"),N("curveType"),xe("index"),p("migrateFee"),p("tradeFeeRate"),p("maxShareFeeRate"),p("minSupplyA"),p("maxLockRate"),p("minSellRateA"),p("minMigrateRateA"),p("minFundRaisingB"),k("mintB"),k("protocolFeeOwner"),k("migrateFeeOwner"),k("migrateToAmmWallet"),k("migrateToCpmmWallet"),M(p(),16)]),Bo=S([p("totalLockedAmount"),p("cliffPeriod"),p("unlockPeriod"),p("startTime"),p("totalAllocatedShare")]),xo=S([p(),p("epoch"),N("bump"),N("status"),N("mintDecimalsA"),N("mintDecimalsB"),N("migrateType"),p("supply"),p("totalSellA"),p("virtualA"),p("virtualB"),p("realA"),p("realB"),p("totalFundRaisingB"),p("protocolFee"),p("platformFee"),p("migrateFee"),Bo.replicate("vestingSchedule"),k("configId"),k("platformId"),k("mintA"),k("mintB"),k("vaultA"),k("vaultB"),k("creator"),M(p(),8)]),zf=S([p(),p("epoch"),k("poolId"),k("beneficiary"),p("claimedAmount"),p("tokenShareAmount"),M(p(),8)]),Io=S([p(),p("epoch"),k("platformClaimFeeWallet"),k("platformLockNftWallet"),p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),M(N(),64,"name"),M(N(),256,"web"),M(N(),256,"img"),k("cpConfigId"),M(N(),224)]);import He from"bn.js";var he=class{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){throw Error()}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:e,amount:n}){throw Error()}static buyExactOut({poolInfo:e,amount:n}){throw Error()}static sellExactIn({poolInfo:e,amount:n}){throw Error()}static sellExactOut({poolInfo:e,amount:n}){throw Error()}};var dt=class extends he{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new L(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new L(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new L(e.virtualB.add(e.realB).toString()).div(e.virtualA.sub(e.realA).toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new L(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new L(e.virtualB.add(e.realB.add(o)).toString()).div(e.virtualA.sub(e.realA.add(r)).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){if(e.lte(i))throw Error("supply need gt total sell");let s=e.sub(i).sub(r);if(s.lte(new He(0)))throw Error("supplyMinusSellLocked <= 0");let a=n.sub(o);if(a.lte(new He(0)))throw Error("tfMinusMf <= 0");let c=a.mul(i).mul(i).div(s),u=a.mul(i).div(s).sub(n);if(u.lt(new He(0)))throw Error("supply/totalSell/totalLockedAmount diff too high");let l=c.div(u),m=n.mul(n).div(u);if(l.lt(new He(0))||m.lt(new He(0)))throw Error("invalid input 0");return{a:l,b:m,c:i}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static getAmountOut({amountIn:e,inputReserve:n,outputReserve:i}){let r=e.mul(i),o=n.add(e);return r.div(o)}static getAmountIn({amountOut:e,inputReserve:n,outputReserve:i}){let r=n.mul(e),o=i.sub(e);return ct(r,o)}};import ce from"bn.js";import Hn from"bn.js";var pt=class extends he{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new L(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new L(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new L(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new L(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new L(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new Hn(0)))throw Error("invalid input 1");let a=new Hn(2).mul(n).sub(o),u=n.mul(s).div(a);return{a:u,b:n,c:u}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualB,initOutput:e.virtualA})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualB,initOutput:e.virtualA})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualA,initOutput:e.virtualB})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualA,initOutput:e.virtualB})}static getAmountOut({amountIn:e,initInput:n,initOutput:i}){return i.mul(e).div(n)}static getAmountIn({amountOut:e,initInput:n,initOutput:i}){let r=n.mul(e);return ct(r,i)}};import Y from"bn.js";import ve from"bn.js";var ze=class{static _multipler(e){return new L(10).pow(e)}static getPrice({priceX64:e,decimalA:n,decimalB:i}){return new L(e.toString()).div(this._Q64).mul(this._multipler(n)).div(this._multipler(i))}static getPriceX64({price:e,decimalA:n,decimalB:i}){let r=e.mul(this._multipler(i)).div(this._multipler(n));return new ve(r.mul(this._Q64).toFixed(0))}};ze._Q64=new L(new ve(1).shln(64).toString());function mb({supply:t,totalFundRaisingB:e,totalLockedAmount:n,totalSellA:i,migrateType:r,decimalsA:o}){let s=t.sub(i).sub(n),a=new ve(new L(s.mul(e).toString()).sqrt().toFixed(0));if(r==="amm"){if(a.gt(new ve(10).pow(new ve(o))))return!0}else if(r==="cpmm"){if(a.gt(new ve(100)))return!0}else throw Error("migrate type error");return!1}var ft=class extends he{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new L(0)}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new L(0)}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new L(e.virtualA.mul(e.realA).toString()).div(ze._Q64).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new L(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new L(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new Y(0)))throw Error("supplyMinusLocked need gt 0");let a=n.mul(new Y(3)).sub(o),u=n.mul(new Y(2)).mul(s).div(a),l=u.mul(u),m=n.mul(new Y(2)).mul(ne).div(l);if(!m.gt(new Y(0)))throw Error("a need gt 0");if(!Dt.gt(m))throw Error("a need lt u64 max");return{a:m,b:new Y(0),c:u}}static buyExactIn({poolInfo:e,amount:n}){let i=e.realB.add(n),r=new Y(2).mul(i).mul(ne).div(e.virtualA);return new Y(new L(r.toString()).sqrt().toFixed(0)).sub(e.realA)}static buyExactOut({poolInfo:e,amount:n}){let i=e.realA.add(n),r=i.mul(i),{div:o,mod:s}=e.virtualA.mul(r).divmod(new Y(2).mul(ne));return(s.isZero()?o:o.add(new Y(1))).sub(e.realB)}static sellExactIn({poolInfo:e,amount:n}){let i=e.realA.sub(n),r=i.mul(i),{div:o,mod:s}=e.virtualA.mul(r).divmod(new Y(2).mul(ne)),a=s.isZero()?o:o.add(new Y(1));return e.realB.sub(a)}static sellExactOut({poolInfo:e,amount:n}){let i=e.realB.sub(n),r=new Y(2).mul(i).mul(ne).div(e.virtualA),o=new Y(new L(r.toString()).sqrt().toFixed(0));return e.realA.sub(o)}};var je=class{static getPoolCurvePointByPoolInfo({curveType:e,pointCount:n,poolInfo:i}){return this.getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i.supply,totalFundRaising:i.totalFundRaisingB,totalSell:i.totalSellA,totalLockedAmount:i.vestingSchedule.totalLockedAmount,migrateFee:i.migrateFee,decimalA:i.mintDecimalsA,decimalB:i.mintDecimalsB})}static getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a,decimalA:c,decimalB:u}){if(n<3)throw Error("point count < 3");let l=this.getCurve(e),m=l.getInitParam({supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a}),d=l.getPoolInitPriceByInit(q(W({},m),{decimalA:c,decimalB:u})),b=r.div(new ce(n-1)),y=new ce(0),g=[{price:d,totalSellSupply:0}],{a:K,b:I}=m,C=y,h=y;for(let R=1;R<n;R++){let pe=R!==n-1?b:r.sub(h),z=this.buyExactIn({poolInfo:{virtualA:K,virtualB:I,realA:C,realB:h,totalFundRaisingB:r,totalSellA:o},amountB:pe,protocolFeeRate:y,platformFeeRate:y,curveType:e,shareFeeRate:y});C=C.add(z.amountA),h=h.add(z.amountB);let fe=this.getPrice({poolInfo:{virtualA:K,virtualB:I,realA:C,realB:h},decimalA:c,decimalB:u,curveType:e});g.push({price:fe,totalSellSupply:new L(C.toString()).div(10**c).toNumber()})}return g}static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i,curveType:r}){return this.getCurve(r).getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i})}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r,curveType:o}){return this.getCurve(o).getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r})}static getPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getEndPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getPoolEndPriceReal({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolEndPriceReal({poolInfo:e,decimalA:i,decimalB:r})}static checkParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,decimals:o,config:s,migrateType:a}){if(Number(o)!==6)throw Error("decimals = 6");if(e.mul(s.maxLockRate).div(Ie).lt(r))throw Error("total lock amount gte max lock amount");if(e.lt(s.minSupplyA.mul(new ce(10**o))))throw Error("supply lt min supply");let u=e.mul(s.minSellRateA).div(Ie);if(i.lt(u))throw Error("invalid input");if(n.lt(s.minFundRaisingB))throw Error("total fund raising lt min fund raising");let l=e.sub(i).sub(r),m=e.mul(s.minMigrateRateA).div(Ie);if(l.lt(m))throw Error("migrate lt min migrate amount");let d=e.sub(i).sub(r),b=new ce(new L(d.mul(n).toString()).sqrt().toFixed(0));if(a==="amm"){let y=new ce(10).pow(new ce(o));if(b.lte(y))throw Error("check migrate lp error")}else if(a==="cpmm"){let y=new ce(100);if(b.lte(y))throw Error("check migrate lp error")}else throw Error("migrate type error")}static buyExactIn({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=i.add(s).add(r),c=this.calculateFee({amount:n,feeRate:a}),u=n.sub(c),l=this.getCurve(o),m=l.buyExactIn({poolInfo:e,amount:u}),d=e.totalSellA.sub(e.realA),b,y,g;if(m.gt(d)){b=d;let I=l.buyExactOut({poolInfo:e,amount:b});y=this.calculatePreFee({postFeeAmount:I,feeRate:a}),g=y.sub(I)}else b=m,y=n,g=c;let K=this.splitFee({totalFee:g,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:b,amountB:y,splitFee:K}}static buyExactOut({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=e.totalSellA.sub(e.realA),c=n;n.gt(a)&&(c=a);let l=this.getCurve(o).buyExactOut({poolInfo:e,amount:n}),m=i.add(s).add(r),d=this.calculatePreFee({postFeeAmount:l,feeRate:m}),b=d.sub(l),y=this.splitFee({totalFee:b,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:c,amountB:d,splitFee:y}}static sellExactIn({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let c=this.getCurve(o).sellExactIn({poolInfo:e,amount:n}),u=this.calculateFee({amount:c,feeRate:i.add(s).add(r)}),l=this.splitFee({totalFee:u,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:n,amountB:c.sub(u),splitFee:l}}static sellExactOut({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s}){let a=i.add(s).add(r),c=this.calculatePreFee({postFeeAmount:n,feeRate:a});if(e.realB.lt(c))throw Error("Insufficient liquidity");let u=c.sub(n),m=je.getCurve(o).sellExactOut({poolInfo:e,amount:c});if(m.gt(e.realA))throw Error();let d=this.splitFee({totalFee:u,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s});return{amountA:m,amountB:n,splitFee:d}}static splitFee({totalFee:e,protocolFeeRate:n,platformFeeRate:i,shareFeeRate:r}){let o=n.add(i).add(r),s=o.isZero()?new ce(0):e.mul(i).div(o),a=o.isZero()?new ce(0):e.mul(r).div(o),c=e.sub(s).sub(a);return{platformFee:s,shareFee:a,protocolFee:c}}static calculateFee({amount:e,feeRate:n}){return xn(e,n,Ie)}static calculatePreFee({postFeeAmount:e,feeRate:n}){if(n.isZero())return e;let i=e.mul(Ie),r=Ie.sub(n);return i.add(r).sub(new ce(1)).div(r)}static getCurve(e){switch(e){case 0:return dt;case 1:return pt;case 2:return ft}throw Error("find curve error")}};import{NATIVE_MINT as Ob,TOKEN_PROGRAM_ID as Db,createAssociatedTokenAccountIdempotentInstruction as Wb}from"@solana/spl-token";import _ from"bn.js";import{PublicKey as So}from"@solana/web3.js";var Hb={initPriceX64:new _("515752397214619"),supply:new _(1e15),totalSellA:new _(7931e11),totalFundRaisingB:new _(85e9),totalLockedAmount:new _("0"),cliffPeriod:new _("0"),unlockPeriod:new _("0"),decimals:6,virtualA:new _("1073471847374405"),virtualB:new _("30050573465"),realA:new _(0),realB:new _(0),protocolFee:new _(0),platformId:new So("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),vestingSchedule:{totalLockedAmount:new _(0),cliffPeriod:new _(0),unlockPeriod:new _(0),startTime:new _(0),totalAllocatedShare:new _(0)}},zb=new _(1e4);export{je as Curve,he as CurveBase,pt as FixedPriceCurve,no as LAUNCHPAD_AUTH_SEED,io as LAUNCHPAD_CONFIG_SEED,ao as LAUNCHPAD_POOL_PLATFORM_SEED,ro as LAUNCHPAD_POOL_SEED,oo as LAUNCHPAD_POOL_VAULT_SEED,so as LAUNCHPAD_POOL_VESTING_SEED,dt as LaunchPadConstantProductCurve,ho as LaunchpadConfig,xo as LaunchpadPool,Hb as LaunchpadPoolInitParam,zf as LaunchpadVesting,Bo as LaunchpadVestingSchedule,ft as LinearPriceCurve,ze as MathLaunch,Io as PlatformConfig,ne as Q64,ue as anchorDataBuf,go as buyExactInInstruction,Gf as buyExactOutInstruction,mb as checkPoolToAmm,wo as claimPlatformFee,Po as claimVestedToken,ko as createPlatformConfig,Ao as createVestingAccount,Me as getPdaCpiEvent,uo as getPdaLaunchpadAuth,Mf as getPdaLaunchpadConfigId,co as getPdaLaunchpadPoolId,lo as getPdaLaunchpadVaultId,po as getPdaPlatformId,fo as getPdaVestId,bo as initialize,yo as sellExactInInstruction,Uf as sellExactOut,mo as u8ToBytes,To as updatePlatformConfig};
//# sourceMappingURL=index.mjs.map